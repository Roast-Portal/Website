<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5LTTX2TGVQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5LTTX2TGVQ');
    gtag('config', 'AW-17346642053');
  </script>
  
  <!-- Event snippet for Submit lead form (1) conversion page -->
  <script>
    function gtag_report_conversion(url) {
      var callback = function () {
        if (typeof(url) != 'undefined') {
          window.location = url;
        }
      };
      gtag('event', 'conversion', {
        'send_to': 'AW-17346642053/djvHCNG48f4aEIWBw89A',
        'value': 0.0,
        'currency': 'USD',
        'event_callback': callback
      });
      return false;
    }
  </script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roast Portal - Daily Coffee Packs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <style>
    /* === Contrast outline that matches the pouch shape exactly === */
    :root{
      --outline-inner: rgba(255,255,255,0.5);
      --outline-outer: rgba(0,0,0,0.2);
      --outline-inner-w: 0.5px;
      --outline-outer-w: 1px;
    }
    .pouch-outline{ position: absolute; inset: 0; pointer-events: none; z-index: 8; transform-style: preserve-3d; }
    .pouch-outline.front{ transform: translateZ(calc(var(--pouch-thickness) / 2)); }
    .pouch-outline.back{ transform: rotateY(180deg) translateZ(calc(var(--pouch-thickness) / 2)); }
    .pouch-outline path{ fill: none; vector-effect: non-scaling-stroke; stroke-linejoin: miter; shape-rendering: geometricPrecision; }
    .pouch-outline .outer{ stroke: var(--outline-outer); stroke-width: var(--outline-outer-w); }
    .pouch-outline .inner{ stroke: var(--outline-inner); stroke-width: var(--outline-inner-w); }
    @media (prefers-color-scheme: dark){
      .pouch-outline .outer{ stroke: rgba(0,0,0,0.5); }
      .pouch-outline .inner{ stroke: rgba(255,255,255,0.72); }
    }
    :root {
      --bg-primary: #FBFBFD;
      --bg-secondary: #F5F5F7;
      --text-primary: #1D1D1F;
      --text-secondary: #6E6E73;
      --text-tertiary: #86868B;
      --accent-blue: #0071E3;
      --accent-green: #0071E3;
      --accent-purple: #BF4FDB;
      --accent-orange: #F56300;
      --card-shadow: 0 2px 20px rgba(0,0,0,0.1);
      --shadow-medium: 0 4px 20px rgba(0,0,0,0.08);
      --shadow-heavy: 0 12px 40px rgba(0,0,0,0.12);
      --shadow-lg: 0 0 1px 0 rgba(0, 0, 0, 0.07), 0 12px 24px -8px rgba(0, 0, 0, 0.12);
      --ease-apple: cubic-bezier(0.4, 0, 0.2, 1);
      --radius-lg: 20px;
      --pouch-width: 300px;
      --pouch-height: calc(var(--pouch-width) * 1.335);
      --pouch-thickness: 38px; /* ~1cm at 96dpi */
    }
    .pouch-extreme{
      --pouch-w: var(--pouch-width); 
      --pouch-h: var(--pouch-height);
      --pouch-min: min(var(--pouch-w), var(--pouch-h));
      --bag-bg: #0a0a0a;
      --bag-radius-frac: 0.0375;
      --pouch-border-frac: 0.003;
      --pouch-border-color: rgba(0, 0, 0, 0.1);
      --label-bg: #FDFEFE;
      --label-radius-frac: 0.055;
      --label-top-frac: 0.88;
      --label-pad-frac: 0.04;
      --label-gradient: linear-gradient(135deg, rgba(245, 248, 252, 0.65) 0%, rgba(252, 254, 255, 0.45) 50%, rgba(248, 250, 252, 0.4) 100%);
      --label-gradient-opacity: 0.85;
      --ink1: hsla(210, 42%, 88%, 0.25);
      --ink2: hsla(200, 40%, 90%, 0.22);
      --ink3: hsla(180, 38%, 92%, 0.20);
      --notch-amp: 1;
      --text-size-frac-default: .05;
    }
    .pouch-extreme.pouch-container{ position:relative; inline-size:var(--pouch-w); block-size:var(--pouch-h); container-type:inline-size }
    .pouch-extreme .pouch{ position:absolute; inset:0; background:var(--bag-bg);
      border-radius: calc(var(--bag-radius-frac) * var(--pouch-min)) calc(var(--bag-radius-frac) * var(--pouch-min)) calc(var(--bag-radius-frac) * .8 * var(--pouch-min)) calc(var(--bag-radius-frac) * .8 * var(--pouch-min));
      overflow:hidden; isolation:isolate; box-shadow: 0 12px 28px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.10); }
    .pouch-extreme .pouch::after{ content:""; position:absolute; inset:0; z-index:3; pointer-events:none; border-radius: inherit; clip-path: inherit; box-shadow: inset 0 0 0 calc(var(--pouch-border-frac) * var(--pouch-min)) var(--pouch-border-color); }
    .pouch-extreme .pouch::before{ content:""; position:absolute; inset:0; opacity:.10; border-radius: inherit; clip-path: inherit; background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 800 800' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E"); }
    .pouch-extreme .pouch{
      --rT: calc(var(--bag-radius-frac) * 100cqw);
      --rB: calc(var(--bag-radius-frac) * 80cqw);
      --t1: var(--rT); --t2: calc(var(--rT)*.6); --t3: calc(var(--rT)*.4); --t4: calc(var(--rT)*.2);
      --b1: var(--rB); --b2: calc(var(--rB)*.6); --b3: calc(var(--rB)*.4); --b4: calc(var(--rB)*.2);
      --nx: var(--notch-amp); --nox: calc(4cqw * var(--nx));
      clip-path: polygon(0 var(--t1), var(--t4) var(--t2), var(--t3) var(--t3), var(--t2) var(--t4), var(--t1) 0,
                         calc(100% - var(--t1)) 0, calc(100% - var(--t2)) var(--t4), calc(100% - var(--t3)) var(--t3), calc(100% - var(--t4)) var(--t2), 100% var(--t1),
                         100% calc(var(--t1) + 4cqw), calc(100% - var(--nox)) calc(var(--t1) + 6cqw), 100% calc(var(--t1) + 8cqw),
                         100% calc(100% - var(--b1)), calc(100% - var(--b4)) calc(100% - var(--b2)), calc(100% - var(--b3)) calc(100% - var(--b3)), calc(100% - var(--b2)) calc(100% - var(--b4)), calc(100% - var(--b1)) 100%,
                         var(--b1) 100%, var(--b2) calc(100% - var(--b4)), var(--b3) calc(100% - var(--b3)), var(--b4) calc(100% - var(--b2)), 0 calc(100% - var(--b1)),
                         0 calc(var(--t1) + 8cqw), var(--nox) calc(var(--t1) + 6cqw), 0 calc(var(--t1) + 4cqw),
                         0 var(--t1)); }
    .pouch-extreme .top-seal{ position:absolute; inset-inline:0; inset-block-start:0; height:10cqw; background-color:var(--bag-bg); border-bottom:1px solid rgba(220,225,230,0.32);
      background-image: repeating-linear-gradient(180deg, rgba(255,255,255,0.06) 0 1px, rgba(0,0,0,0.08) 1px 2px, transparent 2px 3px),
                        linear-gradient(0deg, rgba(0,0,0,0.28) 0, transparent 50%),
                        radial-gradient(100% 50% at 50% 0%, rgba(255,255,255,0.06) 0, transparent 70%); box-shadow: inset 0 -1px 0 rgba(0,0,0,0.38), inset 0 1px 0 rgba(220,225,230,0.22); clip-path: inherit; }
    .pouch-extreme .pouch-label{ --pad: calc(var(--label-pad-frac) * var(--pouch-min)); position:absolute; left:var(--pad); right:var(--pad); bottom:var(--pad); top: calc(100% - (var(--label-top-frac) * 100%));
      background:var(--label-bg); border-radius: calc(var(--label-radius-frac) * var(--pouch-min)); padding:32px 28px 24px 28px; overflow:hidden; 
      display: flex; flex-direction: column; justify-content: space-between;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -1px 0 rgba(0,0,0,0.05), 0 4px 12px rgba(0,0,0,0.08); 
      border: 1px solid rgba(0,0,0,0.04); }
    .pouch-extreme .pouch-label::before{ content:""; position:absolute; inset:0; border-radius:inherit; background:
      linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 60%),
      var(--label-gradient),
      linear-gradient(135deg, var(--ink1) 0%, var(--ink2) 50%, var(--ink3) 100%); opacity: calc(var(--label-gradient-opacity) * 0.7); }
    .pouch-extreme .pouch-label::after{ content:""; position:absolute; inset:0; border-radius:inherit; opacity: 0.03; pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.4'/%3E%3C/svg%3E"); }
    .pouch-extreme .shape-layer, .pouch-extreme .text-layer{ position:absolute; inset:0 }
    .pouch-extreme .shape-layer{ width:100%; height:100%; opacity: 0.6; z-index: 1; display: block; }
    .pouch-extreme .shape-layer rect, .pouch-extreme .shape-layer circle, .pouch-extreme .shape-layer polygon {
      transition: all 0.6s ease;
      filter: blur(0px);
      stroke: rgba(255,255,255,0.4);
      stroke-width: 2;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .pouch-extreme .shape-layer:hover rect, .pouch-extreme .shape-layer:hover circle, .pouch-extreme .shape-layer:hover polygon {
      opacity: 1;
      filter: blur(0px);
      stroke: rgba(255,255,255,0.8);
      stroke-width: 3;
      transform: scale(1.05);
    }
    .pouch-extreme .text-layer{ z-index: 2; }
    .pouch-extreme .text-block{ position:absolute; font-size: calc(var(--text-size-frac, .05) * var(--pouch-min)); }
    .pouch-extreme .label-badge { 
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.1);
    }
    .pouch-extreme .label-tagline { text-shadow: 0 1px 2px rgba(0,0,0,0.05); }
    .pouch-extreme .label-description { letter-spacing: -0.01em; }
     
     * { box-sizing: border-box; margin: 0; padding: 0; }
     
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    .container {
      max-width: 1080px;
      margin: 0 auto;
      padding: 80px 40px 40px;
    }
    
    @media (max-width: 920px) {
      .container { 
        padding: 48px 28px 28px; 
      }
    }
    
    @media (max-width: 640px) {
      .container { 
        padding: 32px 20px 20px; 
      }
      
      /* Better small mobile pouch positioning */
      .pouch-stack { 
        height: calc(var(--pouch-height) + 60px); 
        margin: 0 auto;
        max-width: calc(var(--pouch-width) + 100px); /* Responsive width for small screens */
      }
      
      /* Mobile click hint adjustments */
      .click-hint {
        font-size: 13px;
        margin-top: 10px;
      }
      
      /* Small mobile header adjustments */
      .header-section {
        margin-bottom: 32px;
        padding: 20px 0;
      }
      
      .main-title {
        font-size: 32px;
        margin-bottom: 20px;
      }
      
      .main-subtitle {
        font-size: 16px;
        margin-bottom: 32px;
      }
      
      .header-features {
        gap: 16px;
      }
      
      .feature-item {
        padding: 10px 14px;
      }
      
      /* Ensure pouch stacks are easily tappable on mobile */
      .pouch-stack {
        min-height: 44px; /* Minimum touch target size */
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(0, 113, 227, 0.2);
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }
      
          /* Force pointer events on mobile */
    .pouch-stack * {
      pointer-events: none;
    }
    
    .pouch-stack {
      pointer-events: auto;
    }
    
    /* Ensure no iframe or embedded content can interfere */
    iframe {
      display: none !important;
    }
    
    /* Prevent any embedded content from loading */
    embed, object {
      display: none !important;
    }
      
      /* Ensure stack is centered on small screens */
      .stack-area .pouch-stack {
        margin-left: auto;
        margin-right: auto;
        left: 50%;
        transform: translateX(-50%);
        padding: 0 15px; /* Responsive padding for small screens */
      }
      
      /* Adjust text positioning for very small screens */
      .pouch-extreme .label-badge {
        left: 20px !important;
        top: 12% !important;
      }
      
      .pouch-extreme .label-tagline {
        left: 20px !important;
        top: 45% !important;
        width: calc(100% - 40px) !important;
      }
      
      .pouch-extreme .label-description {
        left: 20px !important;
        top: 70% !important;
        width: calc(100% - 40px) !important;
      }
    }
    
    .section {
      padding: 0;
      position: relative;
    }
    

    
    /* Pouches Section */
    .pouches-section {
      margin-bottom: 40px;
    }

    /* Mini CTA under pouches */
    .pouch-cta {
      text-align: center;
      margin: 32px 0 0;
    }
    .pouch-cta .cta-note {
      margin-bottom: 16px;
      font-size: 14px;
      color: var(--text-tertiary);
      font-weight: 400;
      line-height: 1.4;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0.85;
    }
    
    .pouches-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
      align-items: start;
    }
    
    .pouch-column {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    /* Hide controls; section is intentionally static */
    .stack-controls { display: none !important; }
    
    .pouch-info {
      text-align: center;
      margin-top: 40px;
      max-width: 320px;
    }
    
    .pouch-info p {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.5;
      font-weight: 400;
      letter-spacing: -0.01em;
    }
    
    /* Micro CTA */
    .micro-cta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--accent-blue);
      font-size: 14px;
      font-weight: 600;
      text-decoration: none;
      margin-top: 12px;
      transition: gap 0.2s ease;
    }
    
    .micro-cta:hover {
      gap: 10px;
    }
    
    .micro-cta::after {
      content: '→';
      transition: transform 0.2s ease;
    }
    
    .micro-cta:hover::after {
      transform: translateX(2px);
    }
    
    /* Click hint styling */
    .click-hint {
      margin-top: 12px;
      font-size: 14px;
      color: var(--accent-blue);
      font-weight: 500;
      opacity: 0.8;
      transition: opacity 0.2s ease;
    }
    
    .pouch-stack:hover + .pouch-info .click-hint {
      opacity: 1;
    }

    /* Elevated surface container (Android/Apple-style cards) */
    .surface {
      background: #fff;
      border-radius: 28px;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 2px 18px rgba(0,0,0,0.05), 0 10px 26px rgba(0,0,0,0.04);
      padding: clamp(20px, 3.5vw, 36px);
    }
    @media (prefers-color-scheme: dark) {
      /* Keep surfaces light to maintain contrast with dark pouches/text */
      .surface { background: #ffffff; border-color: rgba(0,0,0,0.12); }
      /* Use default light controls inside light surfaces */
      .stack-controls button {
        background: var(--bg-secondary);
        color: var(--text-primary);
        box-shadow: 0 2px 8px rgba(0,0,0,0.08), inset 0 0 0 1px rgba(0,0,0,0.06);
      }
      .stack-controls .dot { background: rgba(0,0,0,0.25); }
      .stack-controls .dot.active { background: rgba(0,0,0,0.65); }
    }
    
    /* Pouch Stack */
    .pouch-stack {
      position: relative;
      height: calc(var(--pouch-height) + 80px);
      perspective: 1400px;
      width: 100%;
      max-width: var(--pouch-width);
      transition: transform 0.3s ease, filter 0.3s ease;
      cursor: pointer;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .pouch-stack:hover {
      transform: scale(1.02);
      filter: brightness(1.05);
    }
    
    .pouch-stack:active {
      transform: scale(0.98);
    }
    
    /* Add click feedback for pouch stacks */
    .pouch-stack.clicking {
      transform: scale(0.95);
      filter: brightness(0.9);
    }
    
    .pouch-stack:focus-visible {
      outline: 2px solid var(--accent-blue);
      outline-offset: 4px;
      border-radius: 20px;
    }
    
    /* Add subtle pulse animation to indicate interactivity */
    .pouch-stack::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(0, 113, 227, 0.1) 0%, transparent 70%);
      transform: translate(-50%, -50%) scale(0.8);
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      pointer-events: none;
      border-radius: 20px;
    }
    
    .pouch-stack:hover::after {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .stack-card {
      position: absolute;
      width: var(--pouch-width);
      height: var(--pouch-height);
      left: 50%;
      top: 55%;
      transform: translate(-50%, -50%);
      transition: transform 0.6s var(--ease-apple), filter 0.4s var(--ease-apple), opacity 0.4s var(--ease-apple);
      cursor: default;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    /* Subtle depth for background cards (no translucency) */
    .stack-card.mini { opacity: 1; filter: brightness(0.96) saturate(0.92); }

    /* Active card emphasis */
    .stack-card.active {
      transform: translateX(-50%) translateY(calc(-50% - 8px)) translateZ(30px) rotateZ(0deg) !important;
      z-index: 6 !important;
    }
    
    /* removed per-card nth-child transforms; positions set via JS for checkout-style fan */
    
    /* No hover motion; layout is static */
    .pouch-stack:hover .stack-card { transform: translate(-50%, -50%); }

    /* Stack controls */
    .stack-area { position: relative; display: grid; place-items: center; }
    .stack-area .pouch-stack { grid-area: 1 / 1; }
    .stack-controls { grid-area: 1 / 1; position: absolute; left: 50%; bottom: calc(env(safe-area-inset-bottom, 0px) + 12px); transform: translateX(-50%); display: flex; align-items: center; justify-content: center; gap: 14px; padding: 10px 16px; background: rgba(255,255,255,0.75); backdrop-filter: blur(8px); border-radius: 999px; box-shadow: 0 8px 22px rgba(0,0,0,0.12); }
    .stack-controls button {
      appearance: none;
      border: none;
      background: rgba(0,0,0,0.06);
      color: var(--text-primary);
      width: 36px;
      height: 36px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: transform 0.15s ease;
    }
    .stack-controls button:focus-visible { outline: 2px solid #0071E3; outline-offset: 2px; }
    .stack-controls button:hover { transform: translateY(-1px); }
    .stack-controls .dots { display: inline-flex; gap: 8px; }
    .stack-controls .dot {
      width: 8px; height: 8px; border-radius: 999px; background: rgba(0,0,0,0.2);
    }
    .stack-controls .dot.active { background: rgba(0,0,0,0.6); }
    
    /* remove per-layer gloss; keep natural label */
    
    /* Old Pouch Design - Commented out to avoid conflicts
    .pouch-display {
      position: relative;
      cursor: grab;
    }
    
    .pouch-container {
      width: var(--pouch-width);
      height: var(--pouch-height);
      margin: 0 auto;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s var(--ease-apple);
    }
    
    .pouch-container.flipped {
      transform: rotateY(180deg);
    }
    
    .pouch {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      background: #0a0a0a;
      border-radius: 20px 20px 16px 16px;
      overflow: hidden;
      box-shadow: 
        0 12px 28px rgba(0,0,0,.18), 
        0 2px 6px rgba(0,0,0,.10);
      transform-style: preserve-3d;
      clip-path: polygon(
        0 20px,
        4px 12px,
        8px 8px,
        12px 4px,
        20px 0,
        calc(100% - 20px) 0,
        calc(100% - 12px) 4px,
        calc(100% - 8px) 8px,
        calc(100% - 4px) 12px,
        100% 20px,
        100% 32px,
        calc(100% - 12px) 40px,
        100% 48px,
        100% calc(100% - 16px),
        calc(100% - 4px) calc(100% - 8px),
        calc(100% - 8px) calc(100% - 4px),
        calc(100% - 16px) 100%,
        16px 100%,
        8px calc(100% - 4px),
        4px calc(100% - 8px),
        0 calc(100% - 16px),
        0 48px,
        12px 40px,
        0 32px,
        0 20px
      );
    }
    
    .pouch::before {
      content: '';
      position: absolute;
      inset: 0;
      opacity: .10;
      mix-blend-mode: normal;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 800 800' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url('%23noiseFilter)' opacity='0.3'/%3E%3C/svg%3E");
      z-index: 0;
      border-radius: 20px 20px 16px 16px;
      clip-path: inherit;
    }
    */
    
    /* Remove the stroke element - use box-shadow instead */
    
    /* Old 3D edges and pouch sides - Commented out
    .pouch-edge {
      position: absolute;
      background: #0a0a0a;
      transform-origin: center;
    }
    
    .pouch-edge.top {
      height: var(--pouch-thickness);
      width: 100%;
      top: 0;
      transform: rotateX(-90deg) translateZ(calc(var(--pouch-thickness) / 2));
    }
    
    .pouch-edge.bottom {
      height: var(--pouch-thickness);
      width: 100%;
      bottom: 0;
      transform: rotateX(90deg) translateZ(calc(var(--pouch-thickness) / 2));
    }
    
    .pouch-edge.left {
      width: var(--pouch-thickness);
      height: 100%;
      left: 0;
      transform: rotateY(90deg) translateZ(calc(var(--pouch-thickness) / 2));
    }
    
    .pouch-edge.right {
      width: var(--pouch-thickness);
      height: 100%;
      right: 0;
      transform: rotateY(-90deg) translateZ(calc(var(--pouch-thickness) / 2));
    }
    
    .pouch-front {
      transform: translateZ(calc(var(--pouch-thickness) / 2));
    }
    
    .pouch-back {
      transform: rotateY(180deg) translateZ(calc(var(--pouch-thickness) / 2));
    }
    */
    
    /* Old Top seal - Commented out
    .top-seal {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 30px;
      background-color: #0a0a0a;
      border-bottom: 1px solid rgba(220, 225, 230, 0.32);
      background-image:
        repeating-linear-gradient(180deg, rgba(255,255,255,0.06) 0 1px, rgba(0,0,0,0.08) 1px 2px, transparent 2px 3px),
        linear-gradient(0deg, rgba(0,0,0,0.28) 0, transparent 50%),
        radial-gradient(100% 50% at 50% 0%, rgba(255,255,255,0.06) 0, transparent 70%);
      box-shadow: inset 0 -1px 0 rgba(0,0,0,0.38), inset 0 1px 0 rgba(220,225,230,0.22);
      z-index: 5;
    }
    
    .top-seal::after {
      content: '';
      position: absolute;
      inset: 0;
      opacity: .2;
      mix-blend-mode: soft-light;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 300 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='sn'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23sn)' opacity='0.6'/%3E%3C/svg%3E");
    }
    */

    /* side-notch elements removed; clip-path used on .pouch */
    
    /* Old pouch-label - Commented out
    .pouch-label {
      position: absolute;
      bottom: 16px;
      left: 16px;
      right: 16px;
      height: 75%;
      background: #FFFFFF;
      border-radius: 16px;
      padding: 24px 20px;
      box-shadow: 
        inset 0 0 0 1px rgba(0,0,0,0.10),
        inset 0 1px 0 rgba(255,255,255,0.18),
        0 6px 14px rgba(0,0,0,0.10),
        0 1px 3px rgba(0,0,0,0.06);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      overflow: hidden;
      isolation: isolate;
      color: #1d1d1f;
      background-image: none;
      z-index: 1;
    }
    
    .pouch-label::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(120% 80% at 18% 20%, var(--ink1, hsla(210, 52%, 82%, 0.35)) 0 40%, transparent 70%),
        radial-gradient(130% 78% at 80% 24%, var(--ink2, hsla(200, 50%, 84%, 0.32)) 0 38%, transparent 72%),
        radial-gradient(110% 88% at 64% 84%, var(--ink3, hsla(180, 48%, 86%, 0.30)) 0 42%, transparent 74%);
    }
    
    .pouch-label::after { content: none; }
    */
    
    /* Old feature-badge - Commented out
    .feature-badge {
      align-self: flex-start;
      padding: 8px 12px;
      border-radius: 16px;
      margin-bottom: auto;
      position: relative;
      z-index: 1;
      color: #fff;
      --badge-hue: 210;
      --badge-sat: 68%;
      --badge-lit: 48%;
      background: hsl(var(--badge-hue), var(--badge-sat), var(--badge-lit));
      box-shadow: 0 0 0 1px hsla(var(--badge-hue), var(--badge-sat), calc(var(--badge-lit) - 10%), 0.28);
    }
    */
    
    .category-chip {
      align-self: flex-start;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      margin-bottom: 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.06);
      color: #1d1d1f;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.03em;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
    }
    
    /* Old pouch text styles - Commented out
    .pouch-label h4 {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      text-shadow: none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .tagline {
      position: relative;
      z-index: 1;
      font-size: 24px;
      font-weight: 700;
      color: #0a0a0a;
      text-align: center;
      margin: auto 0;
      line-height: 1.2;
      padding: 16px;
      text-shadow: none;
    }
    
    .pouch-back .pouch-label {
      justify-content: flex-start;
      height: 78%;
    }
    */
    
    .description {
      position: relative;
      z-index: 1;
      font-size: 15px;
      color: #2c2c30; /* darker for readability */
      margin: 16px 0;
      line-height: 1.6;
    }
    
    .benefits {
      position: relative;
      z-index: 1;
      list-style: none;
      padding: 0;
      margin: 0;
      text-align: left;
      width: 100%;
    }
    
    .benefits li {
      position: relative;
      padding-left: 16px;
      color: #313136; /* darker bullets/text */
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 6px;
    }
    
    .benefits li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: var(--accent-green);
      font-weight: 700;
    }
    
    /* Interactive Elements */
    .interaction-hint {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 12px 24px;
      border-radius: 24px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .pouch-display:hover .interaction-hint {
      opacity: 1;
    }
    
    .pouch-container.interacting .interaction-hint {
      opacity: 0;
    }
    

    
      /* CTA Section */
    .cta-section {
      text-align: center;
      padding: 0;
      margin-top: 40px;
    }
    
    .cta-section h3 {
      font-size: 48px;
      font-weight: 600;
      margin-bottom: 24px;
    }
    
    .cta-section p {
      font-size: 21px;
      color: var(--text-secondary);
      margin-bottom: 40px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .btn-primary {
      display: inline-block;
      background: var(--accent-green);
      color: white;
      padding: 16px 32px;
      border-radius: 980px;
      font-size: 17px;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,113,227,0.3);
    }

      /* Simple page fade for seamless nav */
      body { transition: opacity .18s ease; }
      body.fade-out { opacity: 0; }
    
    /* Comparison */
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      max-width: 800px;
      margin: 40px auto;
    }
    
    .comparison-item {
      padding: 40px;
      background: var(--bg-secondary);
      border-radius: 20px;
      text-align: center;
    }
    
    .comparison-item.premium {
      background: linear-gradient(135deg, #0071e3 0%, #0077ed 100%);
      color: white;
    }
    
    .comparison-item h4 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 24px;
    }
    
    .comparison-item ul {
      list-style: none;
      padding: 0;
    }
    
    .comparison-item li {
      font-size: 17px;
      margin-bottom: 12px;
      line-height: 1.4;
    }
    
    .comparison-item.premium li {
      color: rgba(255,255,255,0.9);
    }
    
    /* Header Section Styles */
    .header-section {
      text-align: center;
      margin-bottom: 60px;
      padding: 40px 0;
      position: relative;
      overflow: hidden;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .header-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(0, 113, 227, 0.08) 0%, transparent 70%);
      border-radius: 50%;
      z-index: -1;
    }
    
    .main-title {
      font-size: clamp(36px, 6vw, 56px);
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 24px;
      line-height: 1.1;
      letter-spacing: -0.02em;
    }
    
    .main-subtitle {
      font-size: clamp(18px, 3vw, 22px);
      color: var(--text-secondary);
      margin-bottom: 40px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
      font-weight: 400;
    }
    
    .header-features {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 32px;
    }
    
    .feature-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 24px;
      background: var(--bg-secondary);
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .feature-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }
    
    .feature-icon {
      font-size: 24px;
      line-height: 1;
    }
    
    .feature-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      white-space: nowrap;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
      :root { --pouch-width: 260px; }
    }

    @media (max-width: 768px) {

      :root { --pouch-width: min(84vw, 300px); }
      .pouches-grid { grid-template-columns: 1fr; gap: 40px; }
      .pouch-info p { font-size: 15px; }
      
      /* Mobile header adjustments */
      .header-section {
        margin-bottom: 40px;
        padding: 24px 0;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
      
      .main-title {
        font-size: 32px;
        margin-bottom: 20px;
      }
      
      .main-subtitle {
        font-size: 18px;
        margin-bottom: 32px;
      }
      
      .header-features {
        gap: 20px;
        justify-content: center;
      }
      
      .feature-item {
        padding: 12px 16px;
        flex-direction: column;
        text-align: center;
        gap: 8px;
      }
      
      .feature-text {
        font-size: 14px;
        white-space: normal;
      }
      
      /* Keep our custom text sizes for mobile */
      .pouch-extreme .label-badge { --text-size-frac: 0.025 !important; }
      .pouch-extreme .label-tagline { --text-size-frac: 0.125 !important; }
      .pouch-extreme .label-description { --text-size-frac: 0.042 !important; }

      .comparison { grid-template-columns: 1fr; }

      /* Scale pouch to viewport while keeping ratio */
      :root { --pouch-height: calc(var(--pouch-width) * 1.335); }

      /* Better mobile positioning */
      .pouch-stack { 
        height: calc(var(--pouch-height) + 80px); 
        margin: 0 auto;
        position: relative;
        left: 0;
        right: 0;
      }
      .pouch-stack .stack-card { 
        opacity: 1; 
        pointer-events: none;
        top: 50% !important;
      }

      /* Center pouches better on mobile */
      .stack-area { 
        display: flex; 
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px 0;
        width: 100%;
        overflow: hidden;
      }
      .stack-area .pouch-stack { 
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        width: 100%;
        max-width: calc(var(--pouch-width) + 120px); /* Responsive width based on viewport */
        padding: 0 20px; /* Responsive padding */
      }
      
      /* Hide controls on mobile for cleaner look */
      .stack-controls { display: none !important; }
    }
    
      /* Signup section (moved to signup.html) */
    /* Per-stack custom styles - Each pouch gets unique colors */
    #stack1 .pouch-label { --label-sat: 95%; --label-alpha: 0.95; }
    #stack2 .pouch-label { --label-sat: 90%; --label-alpha: 0.95; }
    #stack3 .pouch-label { --label-sat: 85%; --label-alpha: 0.95; }
    
    /* Stack-specific shape layer styling */
    #stack1 .shape-layer { opacity: 0.7; }
    #stack2 .shape-layer { opacity: 0.65; }
    #stack3 .shape-layer { opacity: 0.68; }

    /* Stack 1: Sophisticated Sunset gradient (left) - flows from golden yellow through warm orange to deep coral with rich depth */
    #stack1 .stack-card:nth-child(1) .pouch-label { --ink1: hsla(45, 95%, 85%, 0.90); --ink2: hsla(25, 90%, 80%, 0.85); --ink3: hsla(5, 85%, 75%, 0.80); }
    #stack1 .stack-card:nth-child(2) .pouch-label { --ink1: hsla(43, 94%, 86%, 0.91); --ink2: hsla(23, 89%, 81%, 0.86); --ink3: hsla(3, 84%, 76%, 0.81); }
    #stack1 .stack-card:nth-child(3) .pouch-label { --ink1: hsla(41, 93%, 87%, 0.92); --ink2: hsla(21, 88%, 82%, 0.87); --ink3: hsla(1, 83%, 77%, 0.82); }
    #stack1 .stack-card:nth-child(4) .pouch-label { --ink1: hsla(39, 92%, 88%, 0.93); --ink2: hsla(19, 87%, 83%, 0.88); --ink3: hsla(359, 82%, 78%, 0.83); }
    #stack1 .stack-card:nth-child(5) .pouch-label { --ink1: hsla(37, 91%, 89%, 0.94); --ink2: hsla(17, 86%, 84%, 0.89); --ink3: hsla(357, 81%, 79%, 0.84); }
    #stack1 .stack-card:nth-child(1) .feature-badge { --badge-hue: 15;  --badge-sat: 90%; --badge-lit: 46%; }
    #stack1 .stack-card:nth-child(2) .feature-badge { --badge-hue: 17;  --badge-sat: 91%; --badge-lit: 48%; }
    #stack1 .stack-card:nth-child(3) .feature-badge { --badge-hue: 19;  --badge-sat: 92%; --badge-lit: 44%; }
    #stack1 .stack-card:nth-child(4) .feature-badge { --badge-hue: 21;  --badge-sat: 93%; --badge-lit: 42%; }
    #stack1 .stack-card:nth-child(5) .feature-badge { --badge-hue: 23;  --badge-sat: 94%; --badge-lit: 40%; }

    /* Stack 2: Sophisticated Forest gradient (middle) - flows from fresh lime through emerald to deep forest green with rich depth */
    #stack2 .stack-card:nth-child(1) .pouch-label { --ink1: hsla(160, 90%, 85%, 0.90); --ink2: hsla(140, 85%, 80%, 0.85); --ink3: hsla(120, 80%, 75%, 0.80); }
    #stack2 .stack-card:nth-child(2) .pouch-label { --ink1: hsla(159, 89%, 86%, 0.91); --ink2: hsla(139, 84%, 81%, 0.86); --ink3: hsla(119, 79%, 76%, 0.81); }
    #stack2 .stack-card:nth-child(3) .pouch-label { --ink1: hsla(158, 88%, 87%, 0.92); --ink2: hsla(138, 83%, 82%, 0.87); --ink3: hsla(118, 78%, 77%, 0.82); }
    #stack2 .stack-card:nth-child(4) .pouch-label { --ink1: hsla(157, 87%, 88%, 0.93); --ink2: hsla(137, 82%, 83%, 0.88); --ink3: hsla(117, 77%, 78%, 0.83); }
    #stack2 .stack-card:nth-child(5) .pouch-label { --ink1: hsla(156, 86%, 89%, 0.94); --ink2: hsla(136, 81%, 84%, 0.89); --ink3: hsla(116, 76%, 79%, 0.84); }
    #stack2 .stack-card:nth-child(1) .feature-badge { --badge-hue: 135; --badge-sat: 85%; --badge-lit: 45%; }
    #stack2 .stack-card:nth-child(2) .feature-badge { --badge-hue: 137; --badge-sat: 86%; --badge-lit: 46%; }
    #stack2 .stack-card:nth-child(3) .feature-badge { --badge-hue: 139; --badge-sat: 87%; --badge-lit: 44%; }
    #stack2 .stack-card:nth-child(4) .feature-badge { --badge-hue: 141; --badge-sat: 88%; --badge-lit: 44%; }
    #stack2 .stack-card:nth-child(5) .feature-badge { --badge-hue: 143; --badge-sat: 89%; --badge-lit: 45%; }

    /* Stack 3: Sophisticated Twilight gradient (right) - flows from soft lavender through deep purple to midnight blue with rich depth */
    #stack3 .stack-card:nth-child(1) .pouch-label { --ink1: hsla(290, 85%, 90%, 0.90); --ink2: hsla(270, 80%, 85%, 0.85); --ink3: hsla(250, 75%, 80%, 0.80); }
    #stack3 .stack-card:nth-child(2) .pouch-label { --ink1: hsla(288, 84%, 91%, 0.91); --ink2: hsla(268, 79%, 86%, 0.86); --ink3: hsla(248, 74%, 81%, 0.81); }
    #stack3 .stack-card:nth-child(3) .pouch-label { --ink1: hsla(286, 83%, 92%, 0.92); --ink2: hsla(266, 78%, 87%, 0.87); --ink3: hsla(246, 73%, 82%, 0.82); }
    #stack3 .stack-card:nth-child(4) .pouch-label { --ink1: hsla(284, 82%, 93%, 0.93); --ink2: hsla(264, 77%, 88%, 0.88); --ink3: hsla(244, 72%, 83%, 0.83); }
    #stack3 .stack-card:nth-child(5) .pouch-label { --ink1: hsla(282, 81%, 94%, 0.94); --ink2: hsla(262, 76%, 89%, 0.89); --ink3: hsla(242, 71%, 84%, 0.84); }
    #stack3 .stack-card:nth-child(1) .feature-badge { --badge-hue: 220; --badge-sat: 80%; --badge-lit: 42%; }
    #stack3 .stack-card:nth-child(2) .feature-badge { --badge-hue: 222; --badge-sat: 81%; --badge-lit: 44%; }
    #stack3 .stack-card:nth-child(3) .feature-badge { --badge-hue: 224; --badge-sat: 82%; --badge-lit: 45%; }
    #stack3 .stack-card:nth-child(4) .feature-badge { --badge-hue: 226; --badge-sat: 83%; --badge-lit: 45%; }
    #stack3 .stack-card:nth-child(5) .feature-badge { --badge-hue: 228; --badge-sat: 84%; --badge-lit: 46%; }

    /* Route transition overlay */
    .route-overlay{
      position: fixed; inset: 0; z-index: 9999; pointer-events: none;
      background: var(--bg-primary, #FBFBFD);
      clip-path: circle(0 at var(--x, 50%) var(--y, 50%));
      transition: clip-path .5s cubic-bezier(0.4, 0, 0.2, 1), opacity .3s ease;
    }
    .route-overlay.expand{
      clip-path: circle(var(--R, 150%) at var(--x, 50%) var(--y, 50%));
    }
    
    /* User Analysis Component */
    .user-analysis {
      display: flex;
      gap: 16px;
      padding: 16px;
      background: var(--bg-secondary);
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      margin: 16px 0;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    
    .analysis-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex: 1;
      min-width: 120px;
    }
    
    .analysis-item .label {
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 500;
      letter-spacing: 0.01em;
      text-transform: uppercase;
    }
    
    .analysis-item .value {
      font-size: 18px;
      color: var(--text-primary);
      font-weight: 600;
      line-height: 1.2;
    }
    
    /* Responsive adjustments */
    @media (max-width: 640px) {
      .user-analysis {
        gap: 12px;
        padding: 12px;
      }
      
      .analysis-item {
        min-width: 100px;
      }
      
      .analysis-item .label {
        font-size: 11px;
      }
      
      .analysis-item .value {
        font-size: 16px;
      }
      
      /* Small mobile header adjustments */
      .header-section {
        margin-bottom: 32px;
        padding: 20px 0;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 1 !important;
      }
      
      .main-title {
        font-size: 28px;
        margin-bottom: 16px;
        display: block !important;
        visibility: visible !important;
      }
      
      .main-subtitle {
        font-size: 16px;
        margin-bottom: 24px;
        display: block !important;
        visibility: visible !important;
      }
    }
    
    /* Compact variant for tight spaces */
    .user-analysis.compact {
      padding: 12px;
      gap: 12px;
    }
    
    .user-analysis.compact .analysis-item .label {
      font-size: 11px;
    }
    
    .user-analysis.compact .analysis-item .value {
      font-size: 16px;
    }
    
    /* Alternative inline layout */
    .user-analysis.inline {
      flex-direction: row;
      align-items: center;
      padding: 12px 16px;
      gap: 24px;
    }
    
    .user-analysis.inline .analysis-item {
      flex-direction: row;
      align-items: baseline;
      gap: 8px;
    }
    
    .user-analysis.inline .analysis-item .label {
      text-transform: none;
      font-size: 14px;
    }
    
    .user-analysis.inline .analysis-item .value {
      font-size: 16px;
    }
  </style>
</head>
<body>
  
  <section class="section">
    <div class="container">

      <!-- Header Section -->
      <div class="header-section">
        <h1 class="main-title">Daily Coffee Packs</h1>
        <p class="main-subtitle">Premium coffee delivered fresh, ground to your preference, and tailored to your taste</p>
      </div>

      <!-- Three Pouches Section (minimal) -->
      <div class="pouches-section">
        <div class="pouches-grid">
          <div class="pouch-column">
            <div class="stack-area">
              <div class="pouch-stack" id="stack1"></div>
            </div>
            <div class="pouch-info">
              <p>Crafted exclusively for your palate, each blend evolves with your feedback to keep getting better.</p>
            </div>
          </div>
          <div class="pouch-column">
            <div class="stack-area">
              <div class="pouch-stack" id="stack2"></div>
            </div>
            <div class="pouch-info">
              <p>We prepare your coffee like a barista would—precisely ground, perfectly measured, and sealed to preserve every note.</p>
            </div>
          </div>
          <div class="pouch-column">
            <div class="stack-area">
              <div class="pouch-stack" id="stack3"></div>
            </div>
            <div class="pouch-info">
              <p>Expand your coffee horizons with a special extra bag chosen to surprise and delight your taste buds.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Under‑pouches CTA -->
      <div class="pouch-cta">
        <p class="cta-note">Get premium coffee tailored to your taste. We'll grind it for your method and deliver it at peak freshness.</p>
        <a href="quiz.html" class="btn-primary" data-nav="signup" onclick="return gtag_report_conversion('quiz.html');">Subscribe now</a>
      </div>
      

      
      
    </div>
  </section>
  
  <script>
    // Fancy in-page route transition to signup
    function maxRadiusFrom(x, y){
      const w = window.innerWidth, h = window.innerHeight;
      const dx = Math.max(x, w - x), dy = Math.max(y, h - y);
      return Math.hypot(dx, dy) + 20;
    }
    
    (function(){
      document.addEventListener('click', (e)=>{
        const link = e.target.closest('a[data-nav="signup"]');
        if(!link) return;
        e.preventDefault();
        const x = e.clientX || (window.innerWidth/2);
        const y = e.clientY || (window.innerHeight/2);
        const overlay = document.createElement('div');
        overlay.className = 'route-overlay';
        overlay.style.setProperty('--x', x + 'px');
        overlay.style.setProperty('--y', y + 'px');
        overlay.style.setProperty('--R', maxRadiusFrom(x,y) + 'px');
        document.body.appendChild(overlay);
        requestAnimationFrame(()=>{
          overlay.classList.add('expand');
          // pass coordinates to next page for reverse reveal
          try{ sessionStorage.setItem('route_from', JSON.stringify({x,y})); }catch{}
        });
        setTimeout(()=>{ window.location.href = link.href; }, 420);
      }, { passive: false });
    })();
    // === Vector outline that matches the clip-path polygon ===
    const SVG_NS = 'http://www.w3.org/2000/svg';
    function pouchPathD(w, h){
      const pts = [
        [0,20],[4,12],[8,8],[12,4],[20,0],
        [w-20,0],[w-12,4],[w-8,8],[w-4,12],[w,20],
        [w,32],[w-12,40],[w,48],
        [w,h-16],[w-4,h-8],[w-8,h-4],[w-16,h],
        [16,h],[8,h-4],[4,h-8],[0,h-16],
        [0,48],[12,40],[0,32],
        [0,20]
      ];
      return 'M ' + pts.map(([x,y]) => `${x} ${y}`).join(' L ') + ' Z';
    }
    function makeOutline(container, side){
      const w = container.clientWidth; const h = container.clientHeight;
      const svg = document.createElementNS(SVG_NS, 'svg');
      svg.classList.add('pouch-outline', side);
      svg.setAttribute('viewBox', `0 0 ${w} ${h}`);
      svg.setAttribute('preserveAspectRatio', 'none');
      const d = pouchPathD(w, h);
      const outer = document.createElementNS(SVG_NS, 'path'); outer.setAttribute('class','outer'); outer.setAttribute('d', d);
      const inner = document.createElementNS(SVG_NS, 'path'); inner.setAttribute('class','inner'); inner.setAttribute('d', d);
      svg.append(outer, inner); container.appendChild(svg); return svg;
    }
    // Removed old outline functions for previous pouch design
    /*
    function addPouchOutlines(){
      document.querySelectorAll('.pouch-container').forEach(container => {
        const front = makeOutline(container, 'front');
        const back = makeOutline(container, 'back');
        container._outlines = [front, back];
      });
    }
    function updatePouchOutlines(){
      document.querySelectorAll('.pouch-container').forEach(container => {
        const w = container.clientWidth; const h = container.clientHeight; const d = pouchPathD(w, h);
        (container._outlines || []).forEach(svg => {
          svg.setAttribute('viewBox', `0 0 ${w} ${h}`);
          svg.querySelectorAll('path').forEach(p => p.setAttribute('d', d));
        });
      });
    }
    */
    // Pouch data for each stack
    const stackData = {
      // Stack 1: Personalized Blend
      stack1: [
        { category: 'Experience', badge: 'PERSONALIZED BLEND', tagline: '15 Premium Single Serve Bags of Coffee', description: '' }
      ],
      // Stack 2: Barista Prepared
      stack2: [
        { category: 'Preparation', badge: 'BARISTA PREPARED', tagline: 'Ground for your brew method', description: '' }
      ],
      // Stack 3: Bonus Bag — Exploration
      stack3: [
        { category: 'Discovery', badge: 'BONUS BAG — EXPLORATION', tagline: 'One mystery blend', description: '' }
      ]
    };
    
    // Create pouch HTML
    function createPouch(data, index) {
      return `
        <div class="stack-card" data-idx="${index}" data-category="${data.category || ''}">
          <div class="pouch-extreme pouch-container">
            <div class="pouch">
              <div class="top-seal"></div>
              <div class="pouch-label">
                <svg class="shape-layer" viewBox="0 0 1000 1000" preserveAspectRatio="none" aria-label="Shape layer">
                  <!-- Complex geometric design with multiple layers -->
                  <!-- Main focal shapes -->
                  <rect x="100" y="150" width="180" height="180" rx="25" fill="rgba(255,255,255,0.25)" opacity="0.9"/>
                  <circle cx="750" cy="200" r="120" fill="rgba(255,255,255,0.20)" opacity="0.8"/>
                  
                  <!-- Secondary geometric elements -->
                  <polygon points="250,400 300,300 350,400" fill="rgba(255,255,255,0.30)" opacity="0.7"/>
                  <rect x="600" y="450" width="120" height="120" rx="15" fill="rgba(255,255,255,0.18)" opacity="0.6"/>
                  
                  <!-- Decorative accents -->
                  <circle cx="200" cy="600" r="80" fill="rgba(255,255,255,0.22)" opacity="0.8"/>
                  <polygon points="700,650 750,550 800,650" fill="rgba(255,255,255,0.28)" opacity="0.7"/>
                  
                  <!-- Small detail elements -->
                  <rect x="400" y="250" width="70" height="70" rx="10" fill="rgba(255,255,255,0.35)" opacity="0.9"/>
                  <circle cx="850" cy="450" r="60" fill="rgba(255,255,255,0.24)" opacity="0.8"/>
                  
                  <!-- Additional complexity -->
                  <polygon points="150,300 180,250 210,300" fill="rgba(255,255,255,0.20)" opacity="0.6"/>
                  <rect x="750" y="300" width="50" height="50" rx="8" fill="rgba(255,255,255,0.32)" opacity="0.7"/>
                  <circle cx="300" cy="450" r="40" fill="rgba(255,255,255,0.26)" opacity="0.8"/>
                </svg>
              </div>
              
              <div class="text-layer">
                <div class="text-block label-badge" data-size-frac="0.020" style="--text-size-frac: 0.025; top: 15%; left: 28px; transform: none; color: rgb(255, 255, 255); font-weight: 700; text-transform: uppercase; line-height: 1; letter-spacing: 0.08em; background: rgba(0,0,0,0.75); padding: 12px 20px; border-radius: 24px; white-space: nowrap;">${data.badge}</div>
                <div class="text-block label-tagline" data-size-frac="0.072" style="--text-size-frac: 0.125; top: 48%; left: 28px; transform: none; color: rgb(28, 28, 32); font-weight: 700; line-height: 1.1; text-align: left; width: calc(100% - 56px); white-space: normal; max-width: none;">${data.tagline}</div>
                <div class="text-block label-description" data-size-frac="0.042" style="--text-size-frac: 0.042; top: 73%; left: 28px; transform: none; color: rgb(72, 72, 74); font-weight: 400; line-height: 1.4; text-align: left; width: calc(100% - 56px); white-space: normal; max-width: none;">${data.description.replace(/\n\n/g, '<br><br>')}</div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
          // Initialize stacks when DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
        console.log('Initializing pouch stacks...');
        
        // Check if we're in an iframe and log it
        console.log('Window context - top:', window.top, 'self:', window.self, 'parent:', window.parent);
        console.log('Is in iframe:', window.top !== window.self);
        
        // Debug CSS variables
        console.log('CSS Variables - pouch-width:', getComputedStyle(document.documentElement).getPropertyValue('--pouch-width'));
        console.log('CSS Variables - pouch-height:', getComputedStyle(document.documentElement).getPropertyValue('--pouch-height'));
        console.log('Window dimensions:', window.innerWidth, 'x', window.innerHeight);
        
        // Initialize stacks: render 5 pouches per stack and position like checkout fan
        Object.keys(stackData).forEach(stackId => {
          const stack = document.getElementById(stackId);
          if (!stack) {
            console.error(`Stack element with id ${stackId} not found`);
            return;
          }
          console.log(`Found stack element:`, stack);
          const items = stackData[stackId];
          const count = 5; // Always create 5 pouches for the stack effect
          const cards = [];
          for (let i = 0; i < count; i++) {
            // Use the first (and only) item data for all 5 cards
            const html = createPouch(items[0], i);
            cards.push(html);
          }
                    stack.innerHTML = cards.join('');
          console.log(`Created ${count} pouches for ${stackId}`);
          console.log(`Stack HTML content:`, stack.innerHTML.substring(0, 200) + '...');
          
          const cardEls = Array.from(stack.querySelectorAll('.stack-card'));
          console.log(`Found ${cardEls.length} stack cards in ${stackId}`);
        cardEls.forEach((card, i) => {
          const z = 15 - i;
          const dx = i * 12;                 // horizontal stagger
          const dy = -i * 8;                 // vertical stagger
          const scale = 1 - i * 0.015;       // subtle depth scaling
          if (i > 0) card.classList.add('mini');
          card.style.zIndex = String(z);
          
          // Responsive stack positioning based on viewport width
          const viewportWidth = window.innerWidth;
          const totalSpread = (count - 1) * 12; // Total horizontal spread of all cards
          const centerOffset = totalSpread / 2;  // Half the spread to center the stack
          const adjustedDx = dx - centerOffset;  // Adjust each card position
          
          // Dynamic edge buffer based on screen size
          let edgeBuffer;
          if (viewportWidth <= 640) {
            edgeBuffer = 8; // Small mobile - tighter spacing
          } else if (viewportWidth <= 768) {
            edgeBuffer = 12; // Medium mobile - moderate spacing
          } else {
            edgeBuffer = 15; // Larger screens - comfortable spacing
          }
          
          const finalDx = adjustedDx + edgeBuffer;
          
          card.style.transform = `translate(-50%, -50%) translate(${finalDx}px, ${dy}px) scale(${scale})`;
        });
        // Removed calls to old outline functions
      });
      
      // Make pouch stacks clickable to navigate to quiz
      document.querySelectorAll('.pouch-stack').forEach(stack => {
        stack.style.cursor = 'pointer';
        stack.setAttribute('tabindex', '0');
        stack.setAttribute('role', 'button');
        stack.setAttribute('aria-label', 'Start your coffee journey - take the taste preference quiz');
        
        const handleClick = (e) => {
          // Prevent any default behaviors that might interfere
          e.preventDefault();
          e.stopPropagation();
          
          // Add visual feedback
          stack.classList.add('clicking');
          
          // Debug logging
          console.log('Pouch stack clicked, navigating to quiz...');
          
          // Track conversion when redirecting to quiz
          if (typeof gtag === 'function') {
            gtag('event', 'conversion', {
              'send_to': 'AW-17346642053/djvHCNG48f4aEIWBw89A',
              'value': 0.0,
              'currency': 'USD'
            });
          }
          
          // Force complete page replacement to ensure quiz loads in new tab
          console.log('Navigating to quiz.html...');
          
          // Prevent any default behaviors that might interfere
          e.preventDefault();
          e.stopPropagation();
          
          // Clear the entire page content to force a fresh load
          document.body.innerHTML = '<div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">Loading quiz...</div>';
          
          // Break out of iframe and load quiz in entire browser tab
          console.log('Window top:', window.top);
          console.log('Window self:', window.self);
          console.log('Parent window:', window.parent);
          console.log('Is in iframe:', window.top !== window.self);
          
          try {
            // Method 1: Break out of iframe to parent window
            if (window.top !== window.self) {
              console.log('Breaking out of iframe to parent window');
              window.top.location.href = 'quiz.html';
            } else {
              // Method 2: Direct navigation if not in iframe
              console.log('Not in iframe, using direct navigation');
              window.location.replace('quiz.html');
            }
          } catch (e) {
            console.error('Top navigation failed:', e);
            try {
              // Method 3: Try to break out with target="_top" link
              const link = document.createElement('a');
              link.href = 'quiz.html';
              link.target = '_top';
              link.rel = 'noopener noreferrer';
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
            } catch (e2) {
              console.error('Link click failed:', e2);
              // Method 4: Last resort - try to access parent window
              try {
                parent.location.href = 'quiz.html';
              } catch (e3) {
                console.error('Parent navigation failed:', e3);
                // Method 5: Force reload entire page
                window.location = 'quiz.html';
              }
            }
          }
          
          // Remove click feedback after a short delay
          setTimeout(() => {
            stack.classList.remove('clicking');
          }, 150);
        };
        
        stack.addEventListener('click', handleClick);
        stack.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            handleClick();
          }
        });
      });
      
      // Keep individual cards non-interactive but make the stack container clickable
      document.querySelectorAll('.stack-card').forEach(card => {
        card.style.pointerEvents = 'none';
      });
      
      // Scroll animations
      const observerOptions = {
        threshold: 0.2,
        rootMargin: '0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, observerOptions);
      
      // Apply scroll animations to sections
      document.querySelectorAll('.pouches-section').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(40px)';
        el.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
        observer.observe(el);
      });
      
      // Header animation on page load
      const headerElements = document.querySelectorAll('.main-title, .main-subtitle');
      headerElements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
        
        setTimeout(() => {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }, 200 + (index * 100));
      });
      
      // Ensure header is always visible on mobile
      const headerSection = document.querySelector('.header-section');
      if (headerSection) {
        console.log('Header section found:', headerSection);
        // Force visibility
        headerSection.style.display = 'block';
        headerSection.style.visibility = 'visible';
        headerSection.style.opacity = '1';
      } else {
        console.error('Header section not found!');
      }
      
      // Prevent any iframe or embedded content from loading
      const iframes = document.querySelectorAll('iframe');
      iframes.forEach(iframe => {
        console.log('Removing iframe:', iframe);
        iframe.remove();
      });
      
      // Monitor for any new iframes being added
      const iframeObserver = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (node.nodeName === 'IFRAME') {
              console.log('Preventing iframe from loading:', node);
              node.remove();
            }
          });
        });
      });
      
      iframeObserver.observe(document.body, {
        childList: true,
        subtree: true
      });
      
      // Responsive repositioning on window resize
      function updateStackPositions() {
        Object.keys(stackData).forEach(stackId => {
          const stack = document.getElementById(stackId);
          if (!stack) return;
          
          const cardEls = Array.from(stack.querySelectorAll('.stack-card'));
          cardEls.forEach((card, i) => {
            const z = 15 - i;
            const dx = i * 12;
            const dy = -i * 8;
            const scale = 1 - i * 0.015;
            
            const viewportWidth = window.innerWidth;
            const totalSpread = (cardEls.length - 1) * 12;
            const centerOffset = totalSpread / 2;
            const adjustedDx = dx - centerOffset;
            
            let edgeBuffer;
            if (viewportWidth <= 640) {
              edgeBuffer = 8;
            } else if (viewportWidth <= 768) {
              edgeBuffer = 12;
            } else {
              edgeBuffer = 15;
            }
            
            const finalDx = adjustedDx + edgeBuffer;
            card.style.transform = `translate(-50%, -50%) translate(${finalDx}px, ${dy}px) scale(${scale})`;
          });
        });
      }
      
      // Update positions on resize
      window.addEventListener('resize', updateStackPositions);
    });
    // window.addEventListener('resize', updatePouchOutlines);
    // Removed old pouch-container manipulation
     
     // Stack navigation (prev/next + dots)
     // Remove controls init — section is static

    // Landing CTA → signup (seamless fade)
    (function(){
      document.querySelectorAll('[data-nav="signup"]').forEach(el=>{
        el.addEventListener('click', (e)=>{
          e.preventDefault();
          document.body.classList.add('fade-out');
          // Track conversion when redirecting to quiz
        if (typeof gtag === 'function') {
          gtag('event', 'conversion', {
            'send_to': 'AW-17346642053/djvHCNG48f4aEIWBw89A',
            'value': 0.0,
            'currency': 'USD'
          });
        }
        setTimeout(()=>{ window.location.href = 'quiz.html'; }, 150);
        });
      });
    })();
  </script>
</body>
</html>