<!DOCTYPE html>
<html>
<head>
  <title>Test Google Analytics</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5LTTX2TGVQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5LTTX2TGVQ');
    gtag('config', 'AW-17346642053');
  </script>
  
  <!-- Event snippet for Submit lead form (1) conversion page -->
  <script>
    function gtag_report_conversion(url) {
      var callback = function () {
        if (typeof(url) != 'undefined') {
          window.location = url;
        }
      };
      gtag('event', 'conversion', {
        'send_to': 'AW-17346642053/djvHCNG48f4aEIWBw89A',
        'value': 0.0,
        'currency': 'USD',
        'event_callback': callback
      });
      return false;
    }
  </script>
  
  <script>
    // Additional logging for testing
    window.dataLayer = window.dataLayer || [];
    const originalGtag = window.gtag;
    window.gtag = function() {
      console.log('ðŸŽ¯ gtag called with:', arguments);
      originalGtag.apply(this, arguments);
    }
    
    // Your gtagSendEvent function
    function gtagSendEvent(url, eventData) {
      var callback = function () {
        console.log('âœ… Callback executed! Would navigate to:', url);
        // Comment out actual navigation for testing
        // window.location = url;
      };
      console.log('ðŸ“Š Sending event with data:', eventData);
      gtag('event', 'submission_ok', Object.assign({
        'event_callback': callback,
        'event_timeout': 2000,
      }, eventData || {}));
      return false;
    }
  </script>
</head>
<body>
  <h1>Google Analytics Event Test</h1>
  <button onclick="testEvent()">Test Buy Now Event</button>
  
  <script>
    function testEvent() {
      // Simulate the data from your checkout
      gtagSendEvent('thanks.html', {
        'value': 42.95,
        'currency': 'USD',
        'transaction_id': Date.now().toString(),
        'items': [{
          'item_id': 'subscription',
          'item_name': 'Morning Magic Blend',
          'item_category': 'coffee_subscription',
          'price': 2.50,
          'quantity': 14
        }]
      });
    }
  </script>
  
  <pre id="output"></pre>
</body>
</html>
