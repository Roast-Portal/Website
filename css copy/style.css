/* ---------- Reset & base ---------- */
*,
*::before,
*::after {
  box-sizing: border-box;
}

:root {
  /* ===== FONT SYSTEM - Only 4 Variations ===== */
  /* Primary font stack */
  --font-primary: 'Kanit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  
  /* Monospace font for technical content */
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  
  /* Font weights - only 2 variations */
  --font-weight-regular: 400;
  --font-weight-bold: 700;
  
  /* The 4 font variations:
     1. Body text: var(--font-primary) + var(--font-weight-regular)
     2. Headings/emphasis: var(--font-primary) + var(--font-weight-bold)
     3. Technical/code: var(--font-mono) + var(--font-weight-regular)
     4. Technical emphasis: var(--font-mono) + var(--font-weight-bold)
  */
  
  /* Box dimensions */
  --base-unit: calc(100svh / 2.5 * 0.7); /* Box = 70svh so 10svh top + 20svh bottom fit within viewport */
  --box-depth: var(--base-unit);
  --box-width: calc(var(--base-unit) * 1.25);
  --box-height: calc(var(--base-unit) * 2.5);
  --slot-inset: 0px; /* distance from inner wall for card start */
  --card-depth: calc(var(--box-depth) * .99); /* Card depth is 95% of the box depth, removing the last hardcoded pixel value */
  
  /* --- New, Simplified Positioning Variables --- */
  --card-margin-bottom: calc(var(--box-height) * 0.765); /* Desired space from the box's bottom edge (5%) */
  --card-margin-front: calc(var(--box-depth) * 0.001); /* Desired space from the box's front edge (5%) */
}

html, body {
  margin: 0;
  height: 100%;
  font-family: var(--font-primary);
  font-weight: var(--font-weight-regular);
  background: #ffffff;
  color: #1a1a1a;
  line-height: 1.6;
  overscroll-behavior: none;
}

h1, h2, h3 {
  margin: 0;
  font-weight: var(--font-weight-bold);
}

p {
  margin: 0 0 1rem 0;
}

.scene {
  width: 100vw;
  height: 100svh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding-top: 10svh; /* 10% of viewport height at top */
  box-sizing: border-box;
  perspective: calc(100vw + 100vh);
  position: relative;
  z-index: 10000;
}

/* Explicit 10vh inset around the box */
.scene-headroom { height: 0; }
.scene-footroom { height: 20svh; }

/* Ensure the box sits below the top of the viewport */
.scene .box { margin-top: 0; }

.box {
  width: var(--box-width);
  height: var(--box-height);
  transform-style: preserve-3d; /* Corrected from 'preserve-depth' */
  position: relative;
}

.face {
  position: absolute;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 5rem;
  font-weight: bold;
  color: #333;
  top: 50%;
  left: 50%;
  box-sizing: border-box;
  /* Base shading for 3D depth */
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);
}

.front, .back {
  width: calc(var(--box-width) + 2px);
  height: calc(var(--box-height) + 2px);
}
.left, .right {
  width: calc(var(--box-depth) + 2px);
  height: calc(var(--box-height) + 2px);
}
.top, .bottom {
  width: calc(var(--box-width) + 1px);
  height: calc(var(--box-depth) + 1px);
}

.matte-black {
  background: #282828 !important; /* A deep, matte black color */
  color: #e6e6e6 !important; /* A light grey for the text to be visible */
}

.light-gray-interior {
  background: #AEC6CF !important; /* A pleasant, light blue */
  color: #f0eae9 !important; /* A dark blue text for contrast */
}

/* Force the back face to be blue with maximum specificity */
div.box div.face.back.light-gray-interior {
  background: #b3b5b6 !important; /* Blue interior color */
  color: #535058 !important;
}

/* Front face with dual-sided rendering */
div.box div.face.front.matte-black {
  background: linear-gradient(135deg, #C8D6E1 0%, #a2a09f 100%) !important; /* Blue interior surface */
  color: #1C304A !important;
  transform-style: preserve-3d;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 5rem;
  font-weight: bold;
  box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.6);
}

div.box div.face.front.matte-black::before {
  content: "The best tasting coffee you ever made at home";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%; /* Full side, back to original */
  background: linear-gradient(135deg, #2f2f2f 0%, #0b0b0b 100%); /* Matte black with lighting gradient */
  color: #ffffff;
  display: flex;
  align-items: flex-start; /* Start from top */
  justify-content: flex-start; /* Left-align the text */
  padding: calc(var(--box-width) * 0.1); /* Relative to box width */
  padding-top: calc(var(--box-height) * 0.25); /* Relative positioning */
  font-size: calc(var(--box-width) * 0.11); /* Relative to box width */
  font-weight: bold;
  text-align: left;
  line-height: 1.2; /* Tighter line spacing */
  backface-visibility: hidden;
  box-shadow: inset 0 0 50px #0b090926;
}

div.box div.face.front.matte-black::after {
  content: "Designed by you\A Optimized for you\A Perfect for you";
  position: absolute;
  bottom: calc(var(--box-height) * 0.045); /* Relative to box height */
  left: calc(var(--box-width) * 0.087); /* Relative to box width */
  width: calc(100% - (var(--box-width) * 0.1)); /* Relative margins */
  height: auto;
  background: transparent; /* No background to appear unified */
  color: #bdbcbc;
  display: block;
  font-size: calc(var(--box-width) * 0.055); /* Relative to box width */
  font-weight: normal;
  text-align: left;
  white-space: pre-line; /* Allow line breaks */
  line-height: 1.3;
  backface-visibility: hidden;
}



/* Front face - brightest (facing the light) */
.front  { 
  transform: translate(-50%, -50%) rotateY(0deg) translateZ(calc(var(--box-depth) / 2)); 
  background: linear-gradient(135deg, rgba(210, 8, 8, 0.8) 0%, rgba(223, 8, 8, 0.8) 100%) !important;
  box-shadow: inset 0 0 50px rgba(9, 9, 9, 0.053);
}

/* Back face - darkest (away from light) */
.back   { 
  transform: translate(-50%, -50%) rotateY(180deg) translateZ(calc(var(--box-depth) / 2)); 
  background: linear-gradient(135deg, rgba(100,100,100,0.9) 0%, rgba(60,60,60,0.9) 100%) !important;
  box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.8);
}

/* Right face - medium shadow (side angle to light) */
.right  { 
  transform: translate(-50%, -50%) rotateY(90deg)  translateZ(calc(var(--box-width) / 2)); 
  background: transparent !important;
  box-shadow: none !important;
}

/* Left face - medium shadow (side angle to light) */
.left   { 
  transform: translate(-50%, -50%) rotateY(-90deg) translateZ(calc(var(--box-width) / 2)); 
  background: linear-gradient(-90deg, rgba(231, 8, 8, 0.8) 0%, rgba(199, 8, 8, 0.8) 100%) !important;
  box-shadow: inset 20px 0 50px rgba(0, 0, 0, 0.6);
}

/* Force the left face interior to be blue-gray like other interiors */
div.box div.face.left.light-gray-interior {
  background: linear-gradient(135deg, #C8D6E1 0%, #c6c9ca 100%) !important; /* Blue interior surface matching other walls */
  color: #1C304A !important;
}

/* Top face - slight shadow (angled toward light) */
.top    { 
  transform: translate(-50%, -50%) rotateX(90deg)  translateZ(calc(var(--box-height) / 2)); 
  background: linear-gradient(180deg, rgba(220,220,220,0.8) 0%, rgba(160,160,160,0.8) 100%) !important;
  box-shadow: inset 0 20px 40px rgba(0, 0, 0, 0.4);
}

/* Bottom face - darker (angled away from light) */
.bottom { 
  transform: translate(-50%, -50%) rotateX(-90deg) translateZ(calc(var(--box-height) / 2)); 
  background: linear-gradient(0deg, rgba(140,140,140,0.8) 0%, rgba(80,80,80,0.8) 100%) !important;
  box-shadow: inset 0 -20px 50px rgba(0, 0, 0, 0.7);
}

.scroll-hint {
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  color: rgba(45, 55, 72, 0.7);
  font-size: 0.9rem;
  font-weight: 500;
  z-index: 10;
}
.scroll-hint span { display: none; }
.scroll-hint .arrow { font-size: 1.2rem; animation: bounce 2s infinite; }

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-8px); }
  60% { transform: translateY(-4px); }
}

#content {
  background: #ffffff;
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

.section { padding: 6rem 1.5rem; }
.container { max-width: 1200px; margin: 0 auto; }
.section h2 { font-size: clamp(2rem, 5vw, 3rem); text-align: center; margin-bottom: 1rem; color: #2d3748; }
.section p { font-size: clamp(1rem, 2.5vw, 1.125rem); text-align: center; max-width: 600px; margin: 0 auto 3rem auto; color: #4a5568; }

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation: none !important; transition: none !important; }
}

/* Remove the old, incorrect wall style */
.right-arc-wall {
  display: none;
}

/* Styling for the three-part wall to create a rectangular cutout */
.right {
  display: flex;
  flex-direction: column;
  /* Push the content to the top, letting the slot fill the rest */
  justify-content: flex-start;
  /* This is required for the child card to animate in 3D */
  transform-style: preserve-3d;
}

.right-wall-top, .right-wall-bottom {
  width: 100%;
  background: rgba(188, 5, 5, 0.8);
}

.right-wall-middle {
  width: 100%;
  background: transparent !important;
  border: none !important;
  position: relative;
  /* Add thickness illusion with inner shadows */
  box-shadow: 
    inset 0 calc(var(--box-depth) * 0.02) calc(var(--box-depth) * 0.04) rgba(0, 0, 0, 0.6), /* Top edge shadow */
    inset 0 calc(var(--box-depth) * -0.02) calc(var(--box-depth) * 0.04) rgba(0, 0, 0, 0.6), /* Bottom edge shadow */
    inset calc(var(--box-depth) * 0.02) 0 calc(var(--box-depth) * 0.04) rgba(0, 0, 0, 0.6), /* Left edge shadow */
    inset calc(var(--box-depth) * -0.02) 0 calc(var(--box-depth) * 0.04) rgba(0, 0, 0, 0.6); /* Right edge shadow */
}

.right-wall-middle::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    rgba(60, 60, 60, 0.8) 0%,
    transparent 15%,
    transparent 85%,
    rgba(60, 60, 60, 0.8) 100%
  );
  pointer-events: none;
}

.right-wall-middle::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(40, 40, 40, 0.6) 0%,
    transparent 15%,
    transparent 85%,
    rgba(40, 40, 40, 0.6) 100%
  );
  pointer-events: none;
}

.right-wall-top {
  height: 92.5%; /* Make the wall taller, shrinking the slot below it by half */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 5rem;
  font-weight: bold;
  color: #333;
  background: transparent !important;
  transform-style: preserve-3d;
}

.right-wall-top::before {
  content: "Pull out a single-serve bag of coffee made by an expert barista just for you";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #2b2a2a 0%, #131313 100%); /* Matte black with lighting gradient */
  color: #ffffff;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  padding: calc(var(--box-width) * 0.1); /* Relative to box width */
  padding-top: calc(var(--box-height) * 0.15); /* Match front face text height */
  font-size: calc(var(--box-width) * 0.075); /* Relative to box width */
  font-weight: bold;
  text-align: left;
  line-height: 1.2;
  backface-visibility: hidden;
  box-shadow: inset 0 0 50px rgba(35, 35, 35, 0.15);
}

.right-wall-top::after {
  content: "";
  position: absolute;
  top: calc(var(--box-height) * 0.36); /* Position relative to box height */
  left: calc(var(--box-width) * 0.1); /* Relative to box width */
  width: calc(100% - (var(--box-width) * 0.2)); /* Relative margins */
  height: auto;
  background: transparent;
  color: #d8d6d6;
  display: block;
  font-size: calc(var(--box-width) * 0.05); /* Relative to box width */
  font-weight: 300; /* Lighter weight for professional look */
  text-align: left;
  white-space: pre-line;
  line-height: 1.4;
  letter-spacing: 0.02em; /* Slight letter spacing for professional feel */
  backface-visibility: hidden;
}



/* Remove the style for the deleted bottom wall */
.right-wall-bottom {
  display: none;
}

.card-wrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  width: var(--box-width);
  height: var(--box-height);
  transform-style: preserve-3d;
  transform: translate(-50%, -50%);
}

.card {
  position: absolute;
  width: 100%;
  height: var(--card-depth);
  box-sizing: border-box;
  background: transparent;
  border: 0;
  border-radius: calc(var(--card-depth) * 0.067);
  top: 50%;
  left: 50%;
  transform-origin: center center;
  transform-style: preserve-3d;
  transform:
    translate(-50%, -50%)
    rotateX(-90deg)
    translateX(calc(-1 * var(--slot-inset)))
    translateY(calc(var(--box-depth) / 2 - var(--card-depth) / 2 - var(--card-margin-front)))
    translateZ(calc(var(--box-height) / -2 + var(--card-depth) / 2 + var(--card-margin-bottom) + (var(--box-height) * 0.002)));
}

/* Ensure the embedded pouch fills the card's footprint */
.card > .pouch-boxcard4.pouch-container {
  position: absolute;
  inset: 0;
  margin: 0;
  width: 100% !important;
  height: 100% !important;
  /* Normalize scaling so it uses the card's height as the driver */
  --pouch-base-w: 20rem; /* preserved from export, not used directly when width/height are 100% */
  --pouch-base-h: 25rem;
  --export-scale: 1; /* neutralize export-specific scaling to fit the container */
}


/* Keep inner pouch centered and pre-rotated to emulate source on its side */
.card > .pouch-boxcard4.pouch-container { display: block; }
.card > .pouch-boxcard4 .pouch {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%) rotate(-90deg);
	transform-origin: center center;
}

/* Match pouch text size to the box "Instructions" header */
.card .pouch-boxcard4 .text-layer .t-0,
.card .pouch-boxcard4 .text-layer .t-1 {
	font-size: calc(var(--box-width) * 0.07) !important;
	line-height: 1.2 !important;
}

/* Narrow the second pouch text block so it wraps more and isn't too wide */
.card .pouch-boxcard4 .text-layer .t-1 {
	width: 60% !important;
	left: 50% !important;
	white-space: normal !important;
	text-align: center !important;
	top: 70% !important;
} 

/* Raise the first pouch text block a bit */
.card .pouch-boxcard4 .text-layer .t-0 {
	top: 38% !important;
}

/* Increase pouch label height (raise label top further up the pouch) */
.card .pouch-boxcard4.pouch-container {
	--label-top-frac: 0.85;
}

.card1 {
  background: #ff0000; /* Red */
}

.card2 {
  background: #00ff00; /* Green */
}

.card3 {
  background: #0000ff; /* Blue */
}

.card4 {
  background: #ffff00; /* Yellow */
}

/* Fixed card that appears after rotation to remain on screen */
.card-fixed {
  position: fixed;
  top: 10vh;
  left: 50%;
  transform: translateX(-50%);
  width: var(--box-width);
  height: var(--box-depth);
  background: #ff0000;
  border: calc(var(--card-depth) * 0.05) solid #cc0000;
  border-radius: calc(var(--card-depth) * 0.067);
  z-index: 10000;
  display: none;
}

/* Make side 2 (right face) slot fully transparent */
.face.right { 
  background: transparent !important;
  box-shadow: none !important;
}
